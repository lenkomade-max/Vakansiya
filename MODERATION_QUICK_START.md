# üöÄ –ú–æ–¥–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ - Quick Start

## –ß—Ç–æ —ç—Ç–æ?

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –≤–∞–∫–∞–Ω—Å–∏–π —Å **–∫–∞—Å–∫–∞–¥–æ–º –∏–∑ 5 AI –º–æ–¥–µ–ª–µ–π**:

```
90% ‚Üí –õ–æ–∫–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ (–±–µ—Å–ø–ª–∞—Ç–Ω–æ, –º–≥–Ω–æ–≤–µ–Ω–Ω–æ)
 ‚Üì
10% ‚Üí AI –∫–∞—Å–∫–∞–¥:
       1. DeepSeek V3 (FREE) üÜì
       2. Qwen3 235B (FREE) üÜì ‚Üê –ü–æ–Ω–∏–º–∞–µ—Ç –∞–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω—Å–∫–∏–π!
       3. Mistral Small (FREE) üÜì
       4. Gemini Flash (PAID) üí∞ ‚Üê –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ AZ
       5. GPT-4o Mini (PAID) üí∞
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–æ–ª—É—á–∏—Ç—å OpenRouter API –∫–ª—é—á

```bash
# –ó–∞–π—Ç–∏ –Ω–∞ https://openrouter.ai/
# –°–æ–∑–¥–∞—Ç—å –∫–ª—é—á: https://openrouter.ai/keys
# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á
```

### 2. –î–æ–±–∞–≤–∏—Ç—å –≤ .env.local

``bash
OPENROUTER_API_KEY=sk-or-v1-your-key-here
NEXT_PUBLIC_SITE_URL=https://vakansiya.az
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (Vercel —Å–¥–µ–ª–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

```bash
npm install
```

–ü–∞–∫–µ—Ç—ã:
- `eld` - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ (AZ/RU)
- `string-comparison` - –ø–æ–∏—Å–∫ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

### 4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å API

```typescript
const response = await fetch('/api/moderate', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    title: "Frontend Developer",
    company: "ABC Tech",
    description: "We are looking for...",
    salary: "2000-3000 AZN",
    location: "Bakƒ±",
  }),
});

const result = await response.json();

if (result.status === 'APPROVED') {
  // ‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ë–î
} else if (result.status === 'REJECTED') {
  // ‚ùå –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∏—á–∏–Ω—É –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è
} else {
  // ‚è≥ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞ —Ä—É—á–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É
}
```

## –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è?

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–ª–æ–∫–∞–ª—å–Ω–æ)
- ‚úÖ –°–ø–∞–º-—Å–ª–æ–≤–∞ (AZ + RU)
- ‚úÖ –ú–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–æ (–ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞, –ø–∏—Ä–∞–º–∏–¥—ã)
- ‚úÖ –ú–∞—Ç (AZ + RU)
- ‚úÖ –î—É–±–ª–∏–∫–∞—Ç—ã (similarity > 85%)
- ‚úÖ –ù–µ—Ä–µ–∞–ª—å–Ω–∞—è –∑–∞—Ä–ø–ª–∞—Ç–∞
- ‚úÖ –ò–∑–±—ã—Ç–æ–∫ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤

### AI –ø—Ä–æ–≤–µ—Ä–∫–∞ (–µ—Å–ª–∏ score 50-80)
- ü§ñ –ö–æ–Ω—Ç–µ–∫—Å—Ç –∏ intent
- ü§ñ –°–∫—Ä—ã—Ç–æ–µ –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–æ
- ü§ñ –ö—É–ª—å—Ç—É—Ä–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç
- ü§ñ –°–ª–æ–∂–Ω—ã–µ —Å–ª—É—á–∞–∏

## –õ–æ–≥–∏–∫–∞ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π

| Score | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|-------|-----------|
| ‚â• 80 | ‚úÖ **APPROVED** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ |
| 50-79 | ü§ñ **AI CASCADE** (3 free ‚Üí 2 paid) |
| < 50 | ‚ùå **REJECTED** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ |
| Critical —Ñ–ª–∞–≥–∏ | ‚ùå **REJECTED** –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç score |

## –°—Ç–æ–∏–º–æ—Å—Ç—å

### –†–µ–∞–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç (100 –≤–∞–∫–∞–Ω—Å–∏–π/–¥–µ–Ω—å)

```
–õ–æ–∫–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞:
- 100 –≤–∞–∫–∞–Ω—Å–∏–π √ó 100% = 100 –ø—Ä–æ–≤–µ—Ä–æ–∫
- –°—Ç–æ–∏–º–æ—Å—Ç—å: $0 ‚úÖ

AI –ø—Ä–æ–≤–µ—Ä–∫–∏ (10% –æ—Ç –æ–±—â–µ–≥–æ —á–∏—Å–ª–∞):
- 100 –≤–∞–∫–∞–Ω—Å–∏–π √ó 10% = 10 AI –ø—Ä–æ–≤–µ—Ä–æ–∫/–¥–µ–Ω—å

–ò–∑ –Ω–∏—Ö:
- 90% (9 –ø—Ä–æ–≤–µ—Ä–æ–∫) ‚Üí –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –º–æ–¥–µ–ª–∏ ‚Üí $0 ‚úÖ
- 10% (1 –ø—Ä–æ–≤–µ—Ä–∫–∞) ‚Üí –ø–ª–∞—Ç–Ω—ã–µ –º–æ–¥–µ–ª–∏:
  - Gemini Flash: 1 √ó 500 tokens √ó $0.10/M = $0.00005/–¥–µ–Ω—å
  - GPT-4o Mini: –ø–æ—á—Ç–∏ –Ω–∏–∫–æ–≥–¥–∞

–ò—Ç–æ–≥–æ: $0.00005/–¥–µ–Ω—å = $0.0015/–º–µ—Å—è—Ü = ~$0 üí∞
```

**–í—ã–≤–æ–¥: –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –±–µ—Å–ø–ª–∞—Ç–Ω–æ!**

## –õ–∏–º–∏—Ç—ã –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π

| –ú–æ–¥–µ–ª—å | Free tier | –° $10 –∫—Ä–µ–¥–∏—Ç–æ–º |
|--------|-----------|----------------|
| DeepSeek V3 | 50/–¥–µ–Ω—å | 1000/–¥–µ–Ω—å |
| Qwen3 235B | 50/–¥–µ–Ω—å | 1000/–¥–µ–Ω—å |
| Mistral Small | 50/–¥–µ–Ω—å | 1000/–¥–µ–Ω—å |
| **–ò–¢–û–ì–û** | **150 AI –ø—Ä–æ–≤–µ—Ä–æ–∫/–¥–µ–Ω—å** | **3000 AI –ø—Ä–æ–≤–µ—Ä–æ–∫/–¥–µ–Ω—å** |

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä–æ–≥–æ–≤

### –ò–∑–º–µ–Ω–∏—Ç—å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

```typescript
// lib/moderation/rules.ts

// –î—É–±–ª–∏–∫–∞—Ç—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0.85)
if (similarity > 0.90) {  // –°—Ç—Ä–æ–∂–µ
  flags.push({ type: 'POTENTIAL_DUPLICATE' });
}

// –ù–µ—Ä–µ–∞–ª—å–Ω–∞—è –∑–∞—Ä–ø–ª–∞—Ç–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é > 10000)
if (salary > 15000) {  // –ë–æ–ª–µ–µ –º—è–≥–∫–æ
  flags.push({ type: 'UNREALISTIC_SALARY' });
}
```

### –î–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–∏ —Å–ª–æ–≤–∞

```typescript
// lib/moderation/keywords.ts

export const spamKeywordsAZ = [
  'tez pul qazan',
  'asan qazanc',
  // –î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–∏ ‚Üì
  'm…ônim s√∂z',
];

export const profanityAZ = [
  'sik',
  'g√∂t',
  // –î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–∏ ‚Üì
  'm…ônim s√∂z',
];
```

## –û—Ç–∫–ª—é—á–∏—Ç—å –ø–ª–∞—Ç–Ω—ã–µ –º–æ–¥–µ–ª–∏

```typescript
// app/api/moderate/route.ts

const aiResult = await smartAIModeration(jobPost, rulesResult.flags, {
  allowPaidModels: false,  // ‚Üê –¢–æ–ª—å–∫–æ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ
  minConfidence: 0.7,
});
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
curl -X POST http://localhost:3000/api/moderate \
  -H "Content-Type: application/json" \
  -d '{
    "title": "Frontend Developer",
    "company": "Test Company",
    "description": "We are looking for a talented developer to join our team. Must have 3+ years of experience in React and TypeScript."
  }'
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ Next.js:

```bash
npm run dev
# –∏–ª–∏ –Ω–∞ Vercel: Functions ‚Üí Logs
```

–ü—Ä–∏–º–µ—Ä –ª–æ–≥–æ–≤:

```
üîç Starting rules-based moderation...
üìä Rules result: score=95, approved=true, needsAI=false
‚úÖ –ö–æ–Ω—Ç–µ–Ω—Ç –æ–¥–æ–±—Ä–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

```
üîç Starting rules-based moderation...
üìä Rules result: score=65, approved=false, needsAI=true
ü§ñ Starting cascading AI review...
üîÑ Stage 1: Trying FREE models...
ü§ñ Trying model: Qwen3 235B (free)
‚úÖ Qwen3 235B responded: confidence=0.85, approved=true
```

## –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–º. [MODERATION.md](./MODERATION.md) –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.

## –§–∞–π–ª—ã —Å–∏—Å—Ç–µ–º—ã

```
lib/moderation/
‚îú‚îÄ‚îÄ keywords.ts      # –°–ø–∏—Å–∫–∏ —Å–ª–æ–≤ (—Å–ø–∞–º, –º–∞—Ç, –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–æ)
‚îú‚îÄ‚îÄ rules.ts         # 90% –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
‚îú‚îÄ‚îÄ ai.ts            # –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è (1 –º–æ–¥–µ–ª—å)
‚îî‚îÄ‚îÄ ai-cascade.ts    # –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è (5 –º–æ–¥–µ–ª–µ–π –∫–∞—Å–∫–∞–¥–æ–º) ‚≠ê

app/api/moderate/
‚îî‚îÄ‚îÄ route.ts         # API endpoint
```

---

‚úÖ **–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –Ω–∞ Vercel!**
